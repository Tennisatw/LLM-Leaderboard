# Download the mhtml webpage.
# https://artificialanalysis.ai/evaluations/mmlu-pro?models=gpt-4o-mini%2Co4-mini%2Co3%2Cgpt-oss-120b%2Cgpt-4-1-mini%2Cgpt-oss-20b%2Cgpt-4-1%2Cgpt-5-nano%2Cgpt-4-1-nano%2Co3-mini%2Cgpt-5-medium%2Cgpt-5-minimal%2Cgpt-5%2Cgpt-4o-chatgpt%2Cgpt-5-low%2Cgpt-5-mini%2Co3-mini-high%2Cllama-3-3-instruct-70b%2Cllama-3-1-instruct-405b%2Cllama-3-2-instruct-90b-vision%2Cllama-3-2-instruct-11b-vision%2Cllama-4-scout%2Cllama-4-maverick%2Cgemma-3-27b%2Cgemma-3n-e4b%2Cgemini-2-5-flash-lite%2Cgemma-3-12b%2Cgemini-2-5-flash-lite-reasoning%2Cgemma-3-4b%2Cgemma-3n-e2b%2Cgemini-2-5-flash%2Cgemini-2-5-flash-reasoning%2Cgemini-2-5-pro%2Cgemma-3-1b%2Cclaude-4-sonnet%2Cclaude-4-opus-thinking%2Cclaude-4-sonnet-thinking%2Cclaude-4-opus%2Cministral-8b%2Cministral-3b%2Cdevstral-medium%2Cmistral-small-3-2%2Cdevstral-small%2Cmagistral-medium%2Cmagistral-small%2Ccodestral%2Cmistral-medium-3%2Cmistral-medium-3-1%2Cdeepseek-r1%2Cdeepseek-r1-qwen3-8b%2Cgrok-4%2Cgrok-3-mini-reasoning%2Cgrok-3%2Cnova-premier%2Cphi-4%2Cphi-4-multimodal%2Csolar-pro-2-reasoning%2Csolar-pro-2%2Cminimax-text-01%2Cminimax-m1-80k%2Cminimax-m1-40k%2Cllama-3-1-nemotron-instruct-70b%2Cllama-nemotron-super-49b-v1-5%2Cllama-nemotron-super-49b-v1-5-reasoning%2Cllama-3-3-nemotron-super-49b%2Cllama-3-1-nemotron-ultra-253b-v1-reasoning%2Cllama-3-1-nemotron-nano-4b-reasoning%2Cllama-3-3-nemotron-super-49b-reasoning%2Ckimi-k2%2Cgranite-3-3-8b-instruct%2Creka-flash-3%2Cdeephermes-3-llama-3-1-8b-preview%2Cdeephermes-3-mistral-24b-preview%2Cexaone-4-0-32b%2Cexaone-4-0-32b-reasoning%2Cglm-4.5%2Cglm-4-5-air%2Caya-expanse-32b%2Caya-expanse-8b%2Ccommand-a%2Cjamba-1-7-mini%2Cjamba-1-7-large%2Cqwen3-coder-480b-a35b-instruct%2Cqwen3-235b-a22b-instruct-2507%2Cqwq-32b%2Cqwen3-235b-a22b-instruct-2507-reasoning%2Cqwen3-30b-a3b-2507%2Cqwen3-30b-a3b-2507-reasoning%2Cqwen3-coder-30b-a3b-instruct%2Co1%2Co1-mini%2Cgpt-4o-2024-05-13%2Cgpt-4-turbo%2Cgpt-4o%2Cgpt-35-turbo%2Cgpt-4o-chatgpt-03-25%2Cllama-3-1-instruct-70b%2Cllama-3-1-instruct-8b%2Cllama-3-2-instruct-3b%2Cllama-3-instruct-70b%2Cllama-3-instruct-8b%2Cllama-3-2-instruct-1b%2Cllama-2-chat-13b%2Cllama-2-chat-7b%2Cllama-2-chat-70b%2Cgemini-2-0-pro-experimental-02-05%2Cgemini-2-0-flash-experimental%2Cgemini-1-5-pro%2Cgemini-2-0-flash%2Cgemini-1-5-flash%2Cgemma-2-27b%2Cgemma-2-9b%2Cgemini-1-5-flash-8b%2Cgemini-2-5-pro-03-25%2Cgemini-2-5-flash-04-2025%2Cgemini-2-0-flash-thinking-exp-0121%2Cgemini-2-5-flash-reasoning-04-2025%2Cgemini-2-5-pro-05-06%2Cgemini-2-0-flash-lite-001%2Cgemini-1-5-flash-may-2024%2Cgemini-1-0-pro%2Cgemma-3n-e4b-preview-0520%2Cgemini-1-5-pro-may-2024%2Cclaude-35-sonnet%2Cclaude-35-sonnet-june-24%2Cclaude-3-opus%2Cclaude-3-5-haiku%2Cclaude-3-sonnet%2Cclaude-instant%2Cclaude-3-7-sonnet-thinking%2Cclaude-3-7-sonnet%2Cclaude-21%2Cclaude-2%2Cmistral-large-2%2Cmistral-large-2407%2Cpixtral-large-2411%2Cmistral-small-3%2Cmistral-small%2Cmistral-8x22b-instruct%2Cmistral-small-2402%2Cmistral-large%2Cpixtral%2Cmistral-nemo%2Cmixtral-8x7b-instruct%2Ccodestral-mamba%2Cmistral-7b-instruct%2Cmistral-small-3-1%2Cmistral-medium%2Cdevstral-small-2505%2Cmistral-saba%2Ccodestral-2405%2Cdeepseek-r1-distill-llama-70b%2Cdeepseek-r1-distill-qwen-32b%2Cdeepseek-v3%2Cdeepseek-r1-distill-qwen-14b%2Cdeepseek-r1-distill-llama-8b%2Cdeepseek-r1-distill-qwen-1-5b%2Cdeepseek-r1-0120%2Cdeepseek-v3-0324%2Cdeepseek-coder-v2-lite%2Csonar-pro%2Csonar%2Cgrok-beta%2Cgrok-2-1212%2Copenchat-35%2Cnova-pro%2Cnova-lite%2Cnova-micro%2Cphi-3-mini%2Cphi-3-medium%2Cphi-4-mini%2Clfm-40b%2Csolar-pro-2-preview%2Csolar-pro-2-preview-reasoning%2Cdbrx%2Ctulu3-405b%2Chermes-3-llama-3-1-70b%2Ccommand-r-plus%2Ccommand-r-plus-04-2024%2Ccommand-r%2Ccommand-r-03-2024%2Cjamba-1-6-large%2Cjamba-1-5-large%2Cjamba-1-5-mini%2Cjamba-instruct%2Cjamba-1-6-mini%2Cqwen-2-5-max%2Cqwen2-5-72b-instruct%2Cqwen2-5-coder-32b-instruct%2Cqwen-turbo%2Cqwen2-72b-instruct%2Cqwen3-32b-instruct%2CQwQ-32B-Preview%2Cqwen3-32b-instruct-reasoning%2Cqwen3-1.7b-instruct-reasoning%2Cqwen3-14b-instruct-reasoning%2Cqwen3-30b-a3b-instruct%2Cqwen3-4b-instruct-reasoning%2Cqwen3-14b-instruct%2Cqwen3-0.6b-instruct%2Cqwen3-8b-instruct%2Cqwen3-4b-instruct%2Cqwen3-1.7b-instruct%2Cqwen3-8b-instruct-reasoning%2Cqwen3-235b-a22b-instruct%2Cqwen3-235b-a22b-instruct-reasoning%2Cqwen3-30b-a3b-instruct-reasoning%2Cqwen3-0.6b-instruct-reasoning%2Cqwen2.5-32b-instruct%2Cqwen2-5-coder-7b-instruct%2Cyi-large

from email import message_from_binary_file, policy
from bs4 import BeautifulSoup
import csv

file_path = "MMLU-Pro Benchmark Leaderboard _ Artificial Analysis.mhtml"
with open(file_path, "rb") as f:
    msg = message_from_binary_file(f, policy=policy.default)

html = None
for part in msg.walk():
    if part.get_content_type() == "text/html":
        html = part.get_content()  # 自动根据编码类型解码
        break
if html is None:
    raise ValueError("No HTML part found in the MHTML file.")

soup = BeautifulSoup(html, "html.parser")
graph = soup.find("div", class_="h-80")

# texts = table.get_text("\n", strip=True).split("\n")
texts = [text.get_text(strip=True) for text in graph.find_all("text")]
model_names = [text for text in texts if not "%" in text][1:]
values = [text for text in texts if "%" in text]

with open("leaderboard_mmlupro.csv", "w", newline="", encoding="utf-8") as csvfile:
    csvwriter = csv.writer(csvfile)
    csvwriter.writerow(["Name", "Score"])
    for model_name, value in zip(model_names, values):
        score = value.replace("%", "")
        csvwriter.writerow([model_name, score])